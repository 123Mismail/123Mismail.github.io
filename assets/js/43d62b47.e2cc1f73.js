"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[829],{723(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"c2-ros2-architecture","title":"Chapter 2: ROS 2 Humble Architecture","description":"Learning Outcomes","source":"@site/chapters/c2-ros2-architecture.md","sourceDirName":".","slug":"/c2-ros2-architecture","permalink":"/chapters/c2-ros2-architecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"c2-ros2-architecture","title":"Chapter 2: ROS 2 Humble Architecture","sidebar_label":"C2: ROS 2 Architecture","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"C1: Foundations of Physical AI","permalink":"/chapters/c1-foundations-physical-ai"},"next":{"title":"C3: Actions & Services","permalink":"/chapters/c3-ros2-actions"}}');var i=s(4848),t=s(8453);const o={id:"c2-ros2-architecture",title:"Chapter 2: ROS 2 Humble Architecture",sidebar_label:"C2: ROS 2 Architecture",sidebar_position:2},l="Chapter 2: ROS 2 Humble Architecture",a={},c=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"ROS 2 Installation (Ubuntu 22.04)",id:"ros-2-installation-ubuntu-2204",level:2},{value:"Setup Commands",id:"setup-commands",level:3},{value:"Creating Your First ROS 2 Publisher Node",id:"creating-your-first-ros-2-publisher-node",level:2},{value:"Minimal Publisher Example",id:"minimal-publisher-example",level:3},{value:"Running the Publisher",id:"running-the-publisher",level:3},{value:"Summary",id:"summary",level:2},{value:"Review Questions",id:"review-questions",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-2-ros-2-humble-architecture",children:"Chapter 2: ROS 2 Humble Architecture"})}),"\n",(0,i.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Install"})," ROS 2 Humble on Ubuntu 22.04 and create a functional colcon workspace"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Describe"})," the ROS 2 computational graph (Nodes, Topics, Messages) and explain how it enables distributed robot control"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Implement"})," a basic rclpy Publisher node demonstrating node structure and topic publishing"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["In Chapter 1, we established that Physical AI systems require real-time sensor integration and actuator control. ",(0,i.jsx)(n.strong,{children:"ROS 2 (Robot Operating System 2)"}),' serves as the "nervous system" of humanoid robots, providing the middleware infrastructure that bridges high-level AI decision layers to low-level physical actuator commands.']}),"\n",(0,i.jsxs)(n.p,{children:["Unlike traditional monolithic software architectures, humanoid robots demand ",(0,i.jsx)(n.strong,{children:"distributed computing"}),": sensor drivers run on dedicated processors, AI models execute on GPUs, and motor controllers operate on real-time hardware. ROS 2's computational graph architecture enables this distribution while maintaining coordinated behavior."]}),"\n",(0,i.jsx)(n.p,{children:"This chapter introduces ROS 2 Humble Hawksbill (the Long-Term Support release) as the foundation for humanoid robotics development."}),"\n",(0,i.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ROS 2"}),": Open-source middleware framework providing communication infrastructure and hardware abstraction for robot software"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Node"}),": Independent computational unit encapsulating a specific function (sensor driver, controller, planner)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topic"}),": Named communication channel for asynchronous message passing between nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Message"}),": Structured data packet transmitted over Topics (e.g., ",(0,i.jsx)(n.code,{children:"std_msgs/String"}),", ",(0,i.jsx)(n.code,{children:"sensor_msgs/Imu"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Publisher"}),": Node component that sends messages to a Topic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Subscriber"}),": Node component that receives messages from a Topic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"rclpy"}),": Python client library for ROS 2, providing API for creating nodes and communication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"QoS (Quality of Service)"}),": Policy controlling message delivery behavior (reliability, durability, history)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ros-2-installation-ubuntu-2204",children:"ROS 2 Installation (Ubuntu 22.04)"}),"\n",(0,i.jsx)(n.h3,{id:"setup-commands",children:"Setup Commands"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Add ROS 2 repository\nsudo apt update && sudo apt install locales\nsudo locale-gen en_US en_US.UTF-8\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8\nexport LANG=en_US.UTF-8\n\n# Install ROS 2 Humble\nsudo apt install software-properties-common\nsudo add-apt-repository universe\nsudo apt update && sudo apt install curl -y\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\nsudo apt update\nsudo apt upgrade\nsudo apt install ros-humble-desktop python3-colcon-common-extensions\n\n# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\necho "source /opt/ros/humble/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,i.jsx)(n.h2,{id:"creating-your-first-ros-2-publisher-node",children:"Creating Your First ROS 2 Publisher Node"}),"\n",(0,i.jsx)(n.h3,{id:"minimal-publisher-example",children:"Minimal Publisher Example"}),"\n",(0,i.jsx)(n.p,{children:"This example demonstrates the core pattern of ROS 2 node creation and topic publishing."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# minimal_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        # Initialize node with name 'minimal_publisher'\n        super().__init__('minimal_publisher')\n\n        # Create publisher: topic name 'topic', message type String, queue size 10\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n\n        # Create timer: calls timer_callback every 0.5 seconds\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0  # Message counter\n\n    def timer_callback(self):\n        # Create and populate message\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n\n        # Publish message to topic\n        self.publisher_.publish(msg)\n\n        # Log the published message\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    # Initialize ROS 2 Python client library\n    rclpy.init(args=args)\n\n    # Create and spin the node (keeps it running)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n\n    # Cleanup on shutdown\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"running-the-publisher",children:"Running the Publisher"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run the publisher node\npython3 minimal_publisher.py\n\n# In another terminal, echo messages to verify\nros2 topic echo /topic\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The publisher creates a ",(0,i.jsx)(n.strong,{children:"Node"})," named ",(0,i.jsx)(n.code,{children:"minimal_publisher"}),", establishes a ",(0,i.jsx)(n.strong,{children:"Publisher"})," on the ",(0,i.jsx)(n.strong,{children:"Topic"})," ",(0,i.jsx)(n.code,{children:"/topic"}),", and uses a timer ",(0,i.jsx)(n.strong,{children:"callback"})," to send ",(0,i.jsx)(n.strong,{children:"Messages"})," every 0.5 seconds. This pattern forms the foundation of ROS 2 communication."]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.p,{children:["ROS 2 Humble provides the distributed middleware infrastructure essential for humanoid robotics. The computational graph architecture\u2014built on ",(0,i.jsx)(n.strong,{children:"Nodes"}),", ",(0,i.jsx)(n.strong,{children:"Topics"}),", and ",(0,i.jsx)(n.strong,{children:"Messages"}),"\u2014enables modular, scalable robot control systems. The ",(0,i.jsx)(n.strong,{children:"rclpy"})," library allows Python developers to create nodes that integrate with the broader ROS 2 ecosystem."]}),"\n",(0,i.jsx)(n.p,{children:"In Chapter 3, we will extend this foundation by implementing Subscriber nodes and exploring Service-based communication for request-response patterns."}),"\n",(0,i.jsx)(n.h2,{id:"review-questions",children:"Review Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Conceptual"}),": Why does ROS 2 use a distributed computational graph instead of a monolithic architecture for humanoid robots?"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Applied"}),": Modify the ",(0,i.jsx)(n.code,{children:"MinimalPublisher"})," to publish at 10 Hz instead of 2 Hz. What parameter must change?"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Structural"}),": What are the three required components for a ROS 2 Publisher node as demonstrated in ",(0,i.jsx)(n.code,{children:"minimal_publisher.py"}),"?"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);